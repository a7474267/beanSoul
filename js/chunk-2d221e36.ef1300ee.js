(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221e36"],{cbef:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),t._m(0),s("div",{staticClass:"container mb-3"},[s("div",{staticClass:"row flex-column-reverse flex-md-row justify-content-center"},[s("div",{staticClass:"col-md-7"},[t._m(1),s("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid;return[s("form",{staticClass:"font-weight-bold",on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[s("div",{staticClass:"form-group"},[s("validation-provider",{attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes,r=e.passed;return[s("label",{attrs:{for:"email"}},[s("span",{staticClass:"text-danger"},[t._v("*")]),t._v("電子郵件 ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",class:i,attrs:{type:"email",id:"email","aria-describedby":"emailHelp",placeholder:"請輸入Email"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a[0]?s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))]):t._e(),r?s("span",{staticClass:"valid-feedback"},[t._v("Email 輸入正確")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes,r=e.passed;return[s("label",{attrs:{for:"name"}},[s("span",{staticClass:"text-danger"},[t._v("*")]),t._v("收件人姓名 ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.name,expression:"user.name",modifiers:{trim:!0}}],staticClass:"form-control",class:i,attrs:{type:"text",id:"name","aria-describedby":"emailHelp",placeholder:"請輸入姓名"},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a[0]?s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))]):t._e(),r?s("span",{staticClass:"valid-feedback"},[t._v("姓名輸入正確")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("validation-provider",{attrs:{rules:"required|min:8"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes,r=e.passed;return[s("label",{attrs:{for:"phone"}},[s("span",{staticClass:"text-danger"},[t._v("*")]),t._v("收件人電話 ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.tel,expression:"user.tel",modifiers:{trim:!0}}],staticClass:"form-control",class:i,attrs:{type:"text",id:"phone","aria-describedby":"emailHelp",placeholder:"請輸入收件人電話"},domProps:{value:t.user.tel},on:{input:function(e){e.target.composing||t.$set(t.user,"tel",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a[0]?s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))]):t._e(),r?s("span",{staticClass:"valid-feedback"},[t._v("電話輸入正確")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("validation-provider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.errors,i=e.classes,r=e.passed;return[s("label",{attrs:{for:"address"}},[s("span",{staticClass:"text-danger"},[t._v("*")]),t._v("收件人地址 ")]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.user.address,expression:"user.address",modifiers:{trim:!0}}],staticClass:"form-control",class:i,attrs:{type:"text",id:"address","aria-describedby":"emailHelp",placeholder:"請輸入收件人地址"},domProps:{value:t.user.address},on:{input:function(e){e.target.composing||t.$set(t.user,"address",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a[0]?s("span",{staticClass:"invalid-feedback"},[t._v(t._s(a[0]))]):t._e(),r?s("span",{staticClass:"valid-feedback"},[t._v("地址輸入正確")]):t._e()]}}],null,!0)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"message"}},[s("span",{staticClass:"text-danger"},[t._v("*")]),t._v("其他需求備註 ")]),s("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.message,expression:"message",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{name:"",id:"message",rows:"5",placeholder:"若有其他需求，請留言告訴我們"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),s("div",{staticClass:"row justify-content-between"},[s("div",{staticClass:"col-md-4"},[s("router-link",{staticClass:"font-weight-bold btn btn-outline-dark w-100 mb-3",attrs:{to:"/cart"}},[t._v(" 上一步")])],1),s("div",{staticClass:"col-md-4"},[s("button",{staticClass:"font-weight-bold btn btn-outline-danger w-100",attrs:{disabled:a}},[t._v(" 下一步 "),t.sendingOrder?s("i",{staticClass:"fas fa-spinner"}):t._e()])])])])]}}])})],1),s("div",{staticClass:"col-md-5 border shadow-lg rounded-lg mb-3 mb-md-0"},[t._m(2),t._l(t.carts,(function(e){return s("div",{key:e.id,staticClass:"form-row mb-2"},[s("div",{staticClass:"col-3"},[s("img",{staticClass:"img-fluid rounded-circle",attrs:{src:e.product.imageUrl,alt:""}})]),s("div",{staticClass:"col-6 d-flex flex-column justify-content-center\n              align-items-center"},[s("h6",{staticClass:"mb-1 font-weight-bold"},[t._v(t._s(e.product.title))]),s("small",{staticClass:"text-muted font-weight-bold"},[t._v(" "+t._s(e.product.price)+" / "+t._s(e.product.unit))])]),s("div",{staticClass:"col-3 d-flex align-items-center justify-content-center"},[t._v(" X "+t._s(e.qty)+" ")])])})),s("hr",{staticClass:"border-dark mt-0 border-bottom w-100"}),t.cartTotal>2e3?s("div",[t._m(3),s("div",{staticClass:"input-group mb-3"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.code,expression:"code",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2"},on:{click:t.applyCoupon}},[t._v(" 套用優惠碼 ")])])]),s("div",{staticClass:"d-flex justify-content-between font-weight-bold"},[s("p",{staticClass:"mb-0"},[t._v("小計")]),s("p",{staticClass:"mb-0"},[t._v(t._s(t.cartTotal))])]),t.coupon.success?s("div",{staticClass:"d-flex justify-content-between font-weight-bold"},[s("p",{staticClass:"mb-0"},[t._v("折扣")]),s("p",{staticClass:"text-danger"},[t._v("-"+t._s(t.cartTotal-t.coupon.data.final_total))])]):t._e(),s("hr",{staticClass:"border-dark"}),s("div",{staticClass:"d-flex justify-content-between"},[s("h3",{staticClass:"font-weight-bold"},[t._v("總金額")]),t.coupon.success?s("h3",[t._v(t._s(t.coupon.data.final_total))]):s("h3",[t._v(t._s(t.cartTotal))])])]):s("div",[s("p",{staticClass:"text-muted font-weight-bold"},[t._v("消費滿 2,000 即可享 88 折優惠，您目前的消費金額尚差 "),s("span",{staticClass:"text-success"},[t._v(t._s(2e3-t.cartTotal)+"元!")])]),s("router-link",{staticClass:"btn btn-outline-dark w-100 mb-2",attrs:{to:"/products"}},[t._v(" 繼續選購 ")]),s("div",{staticClass:"d-flex justify-content-between font-weight-bold"},[s("p",{staticClass:"mb-0"},[t._v("小計")]),s("p",{staticClass:"mb-0"},[t._v(t._s(t.cartTotal))])]),t._m(4),s("p",{staticClass:"text-right text-danger font-weight-bold"},[t._v("消費金額滿 2,000 元，免運費")]),s("hr",{staticClass:"border-dark"}),s("div",{staticClass:"d-flex justify-content-between"},[s("h3",{staticClass:"font-weight-bold"},[t._v("總金額")]),t.coupon.success?s("h3",[t._v(t._s(t.coupon.data.final_total))]):s("h3",[t._v(t._s(t.cartTotal+170))])])],1)],2)])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"jumbotron jumbotron-fluid bg-style",staticStyle:{"background-image":"url(img/coffee-1580595_1280.jpg)"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col md-5 d-flex justify-content-center justify-content-md-start"},[s("h2",{staticClass:"text-white font-weight-bold"},[t._v(" 滿室飄香! "),s("br"),t._v("宅配到府! ")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-center"},[s("h4",{staticClass:"font-weight-bold"},[t._v("訂購人資訊")]),s("hr",{staticClass:"border-dark mt-0 border-bottom w-100"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h4",{staticClass:"font-weight-bold"},[t._v("訂單明細")]),s("hr",{staticClass:"border-dark mt-0 border-bottom w-100"})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",{staticClass:"text-muted font-weight-bold"},[t._v("您的消費金額已達 2,000 元，立即輸入夏季限時優惠碼 "),s("span",{staticClass:"text-success"},[t._v("happysummer88 ")]),t._v('"，即享 '),s("span",{staticClass:"text-success"},[t._v("88 折 ")]),t._v("優惠！")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex justify-content-between font-weight-bold"},[s("p",{staticClass:"mb-0"},[t._v("運費")]),s("p",{staticClass:"mb-0"},[t._v("170")])])}],r=(s("99af"),{data:function(){return{isLoading:!1,carts:[],cartTotal:0,code:"",coupon:{},sendingOrder:!1,user:{name:"",email:"",tel:"",address:""},message:""}},methods:{getCarts:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/cart");t.$http.get(e).then((function(e){t.carts=e.data.data.carts,t.carts.sort((function(t,e){return t.qty-e.qty})),t.cartTotal=e.data.data.total}))},applyCoupon:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/coupon"),s={code:t.code};t.isLoading=!0,t.$http.post(e,{data:s}).then((function(e){t.isLoading=!1,t.coupon=e.data,t.getCarts()}))},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/order");t.sendingOrder=!0;var s={user:t.user,message:t.message};t.isLoading=!0,t.$http.post(e,{data:s}).then((function(e){t.sendingOrder=!1,t.isLoading=!1,t.$bus.$emit("get-cart"),t.$router.push("/cart-check/".concat(e.data.orderId))}))}},created:function(){this.getCarts()}}),o=r,n=s("2877"),l=Object(n["a"])(o,a,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d221e36.ef1300ee.js.map