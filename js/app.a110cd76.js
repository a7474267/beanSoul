(function(t){function e(e){for(var n,c,i=e[0],o=e[1],u=e[2],l=0,d=[];l<i.length;l++)c=i[l],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&d.push(s[c][0]),s[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);f&&f(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(n=!1)}n&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},c={app:0},s={app:0},r=[];function i(t){return o.p+"js/"+({}[t]||t)+"."+{"chunk-0d93cf29":"43afc5bc","chunk-1a2543f2":"2324c88e","chunk-1f675a58":"444d6239","chunk-2d2086b7":"f03d6d38","chunk-2d221e36":"ef1300ee","chunk-2ec0b81a":"d8d4d179","chunk-53efafba":"146266c2","chunk-71f4f959":"b3fef1d6","chunk-7af1b54e":"97711bb5","chunk-7e6f80b1":"d0d894bf","chunk-a69c7134":"27ec5f36","chunk-b9f6cfca":"8663019b"}[t]+".js"}function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(t){var e=[],a={"chunk-0d93cf29":1,"chunk-1a2543f2":1,"chunk-1f675a58":1,"chunk-2ec0b81a":1,"chunk-53efafba":1,"chunk-71f4f959":1,"chunk-7af1b54e":1,"chunk-a69c7134":1,"chunk-b9f6cfca":1};c[t]?e.push(c[t]):0!==c[t]&&a[t]&&e.push(c[t]=new Promise((function(e,a){for(var n="css/"+({}[t]||t)+"."+{"chunk-0d93cf29":"ec53e4e5","chunk-1a2543f2":"eb7ca29a","chunk-1f675a58":"330dce1e","chunk-2d2086b7":"31d6cfe0","chunk-2d221e36":"31d6cfe0","chunk-2ec0b81a":"b63c6e24","chunk-53efafba":"15b8c135","chunk-71f4f959":"c83ad0b2","chunk-7af1b54e":"246bd21f","chunk-7e6f80b1":"31d6cfe0","chunk-a69c7134":"3febd910","chunk-b9f6cfca":"d883f36c"}[t]+".css",s=o.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var u=r[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===s))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===n||l===s)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var n=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete c[t],f.parentNode.removeChild(f),a(r)},f.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){c[t]=0})));var n=s[t];if(0!==n)if(n)e.push(n[2]);else{var r=new Promise((function(e,a){n=s[t]=[e,a]}));e.push(n[2]=r);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=i(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(f);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),c=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+c+")",d.name="ChunkLoadError",d.type=n,d.request=c,a[1](d)}s[t]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/beanSoul/",o.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},4407:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("159b"),a("b64b");var n=a("2b0e"),c=a("2f62"),s=a("bc3a"),r=a.n(s),i=a("2106"),o=a.n(i),u=a("7212"),l=a.n(u),d=a("6d3b"),f=a("8343"),p=a("5dc8"),h=a("d17a"),m=(a("bbe3"),a("9062")),b=a.n(m),v=(a("e40d"),a("7bb1")),g=a("4c93"),k=(a("4989"),a("9955")),C=a.n(k),y=a("2ef0"),_=a.n(y),O=a("77ed"),w=a.n(O),x=a("f5af"),T=a.n(x),L=(a("e829"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Toast"),a("router-view")],1)}),j=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"toast-position"},t._l(t.messages,(function(e,n){return a("div",{key:n,staticClass:"toast fade show",attrs:{id:"toast-"+n,role:"alert","aria-live":"assertive","aria-atomic":"true","data-autohide":"false"}},[a("div",{staticClass:"toast-header"},[a("div",{staticClass:"inline-block rounded mr-2 toasts-square",class:"bg-"+e.status}),a("strong",{staticClass:"mr-auto"},[t._v("Bean Soul")]),a("small",[t._v("現在")]),a("button",{staticClass:"ml-2 mb-1 close",attrs:{type:"button","data-dismiss":"toast","aria-label":"Close"},on:{click:function(e){return t.closeToast("toast-"+n)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),a("div",{staticClass:"toast-body"},[t._v(" "+t._s(e.message)+" ")])])})),0)},E=[],S=(a("a434"),a("1157")),N=a.n(S),P={data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,n){a.timestamp===t&&e.messages.splice(n,1)}))}),5e3)},closeToast:function(t){N()("#".concat(t)).toast("hide")}},created:function(){var t=this;t.$bus.$on("alert",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}},q=P,$=(a("d0ff"),a("2877")),D=Object($["a"])(q,A,E,!1,null,"6f1dd29c",null),R=D.exports,I={name:"App",components:{Toast:R},data:function(){return{}}},M=I,G=(a("5c0b"),Object($["a"])(M,L,j,!1,null,null,null)),B=G.exports,U=(a("d3b7"),a("3ca3"),a("ddb0"),a("8c4f")),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("router-view"),a("Footer")],1)},J=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-primary sticky-top"},[a("div",{staticClass:"container"},[a("nav",{staticClass:"navbar navbar-expand-md navbar-dark bg-primary"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:"/"}},[a("img",{staticClass:"rounded-pill",attrs:{src:"img/ajk5p-0iuoe.svg",alt:""}})]),a("span",{staticClass:"d-md-none navbar-nav ml-auto"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-md fa-shopping-cart fa-2x"}),t.carts.length?a("span",{staticClass:"badge badge-pill badge-warm cart-logo-position"},[t._v(t._s(t.carts.length))]):t._e()])],1),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarNav"}},[a("div",{staticClass:"d-none d-md-block ml-auto"},[a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item d-flex align-items-center"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[t._v("首頁")])],1),a("li",{staticClass:"nav-item d-flex align-items-center"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/about"}},[t._v("關於我們")])],1),a("li",{staticClass:"nav-item d-flex align-items-center"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/products"}},[t._v("好豆市集")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/cart"}},[a("i",{staticClass:"fas fa-md fa-shopping-cart fa-2x"}),a("span",{staticClass:"badge badge-pill badge-warm cart-logo-position"},[t._v(" "+t._s(t.carts.length))])])],1)])]),a("div",{staticClass:"d-md-none"},[a("ul",{staticClass:"navbar-nav text-center"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link border-bottom mt-3",attrs:{to:"/"}},[t._v("首頁")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link border-bottom",attrs:{to:"/about"}},[t._v("關於我們")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link border-bottom",attrs:{to:"/products"}},[t._v("好豆市集")])],1)])])])],1)])])},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],H=a("5530"),K={data:function(){return{}},computed:Object(H["a"])({},Object(c["c"])(["carts"])),watch:{$route:function(){N()("#navbarNav").collapse("hide")}},methods:Object(H["a"])({},Object(c["b"])(["getCarts"])),created:function(){var t=this;t.getCarts()}},z=K,Q=(a("e8a6"),Object($["a"])(z,V,W,!1,null,"390fef25",null)),X=Q.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-primary"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row py-4 d-flex align-items-center"},[t._m(0),a("div",{staticClass:"col-lg-6 mt-3 mt-lg-0"},[a("ul",{staticClass:"list-unstyled mb-0 d-flex\n                justify-content-lg-end justify-content-center align-items-center"},[t._m(1),t._m(2),a("li",{staticClass:"ml-2"},[a("router-link",{staticClass:"btn text-light border-light",attrs:{to:"/login"}},[t._v(" 管理員登入 ")])],1)])])])])])},Z=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-lg-6 d-flex justify-content-center justify-content-lg-start"},[a("p",{staticClass:"mb-0 text-light"},[t._v("Copyright © 2020 "),a("span",{staticClass:"font-weight-bold"},[t._v("Bean Soul")]),t._v(" All Rights Reserved. ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{staticClass:"text-white mr-2",attrs:{href:"mailto:service@beansoul.com.tw"}},[a("i",{staticClass:"fas fa-envelope fa-2x"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"ml-2"},[a("a",{staticClass:"text-white mr-2",attrs:{target:"_blank",href:"https://www.facebook.com/benson.cafe"}},[a("i",{staticClass:"fab fa-facebook fa-2x"})])])}],tt={},et=tt,at=Object($["a"])(et,Y,Z,!1,null,null,null),nt=at.exports,ct={components:{Navbar:X,Footer:nt}},st=ct,rt=Object($["a"])(st,F,J,!1,null,null,null),it=rt.exports;n["default"].use(U["a"]);var ot=[{path:"*",redirect:"/"},{path:"/",component:it,children:[{path:"",component:function(){return a.e("chunk-0d93cf29").then(a.bind(null,"eae1"))}},{path:"about",component:function(){return a.e("chunk-b9f6cfca").then(a.bind(null,"2f7f"))}},{path:"products",component:function(){return a.e("chunk-71f4f959").then(a.bind(null,"81b1"))}},{path:"/product/:id",component:function(){return a.e("chunk-53efafba").then(a.bind(null,"0fd0"))}},{path:"/cart",component:function(){return a.e("chunk-2ec0b81a").then(a.bind(null,"2355"))}},{path:"/cart-form",component:function(){return a.e("chunk-2d221e36").then(a.bind(null,"cbef"))}},{path:"/cart-check/:orderId",component:function(){return a.e("chunk-a69c7134").then(a.bind(null,"73c6"))}}]},{path:"/login",name:"Login",component:function(){return a.e("chunk-2d2086b7").then(a.bind(null,"a55b"))}},{path:"/admin",name:"Admin",component:function(){return a.e("chunk-1a2543f2").then(a.bind(null,"7277"))},children:[{path:"products",component:function(){return a.e("chunk-7af1b54e").then(a.bind(null,"61bc"))},meta:{requiresAuth:!0}},{path:"orders",component:function(){return a.e("chunk-1f675a58").then(a.bind(null,"efd9"))},meta:{requiresAuth:!0}},{path:"coupons",component:function(){return a.e("chunk-7e6f80b1").then(a.bind(null,"8c58"))},meta:{requiresAuth:!0}}]}],ut=new U["a"]({linkExactActiveClass:"active",scrollBehavior:function(){return{x:0,y:0}},routes:ot}),lt=ut;n["default"].prototype.$bus=new n["default"];var dt=a("d722");a("99af"),a("4de4"),a("6062"),a("a630"),a("13d5");n["default"].use(c["a"]);var ft=new c["a"].Store({state:{isLoading:!1,productLoading:"",products:[],carts:[],categories:[],cartTotal:0},actions:{updateLoading:function(t,e){t.commit("LOADING",e)},productLoading:function(t,e){t.commit("PRODUCTLOADING",e)},getProducts:function(t){t.commit("LOADING",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/products/all");r.a.get(e).then((function(e){t.commit("LOADING",!1),t.commit("PRODUCTS",e.data.products),t.commit("CATEGORIES")}))},getCarts:function(t){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/cart");r.a.get(e).then((function(e){t.commit("CARTS",e.data.data.carts),t.commit("CARTSTOTAL",e.data.data.carts)}))},addToCart:function(t,e){var a=e.id,n=e.quantity,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/cart"),s={product_id:a,qty:n},i=t.state.carts.filter((function(t){return t.product.id===a}));if(t.dispatch("updateLoading",!0),t.dispatch("productLoading",a),i.length>0){var o=i[0].id,u=i[0].qty,l=u+s.qty;s={product_id:a,qty:l},t.dispatch("deleteOrder",o),r.a.post(c,{data:s}).then((function(){t.dispatch("updateLoading",!1),t.dispatch("productLoading",""),t.dispatch("getCarts")})).catch((function(){t.dispatch("updateLoading",!1),t.dispatch("productLoading","")}))}else r.a.post(c,{data:s}).then((function(){t.dispatch("updateLoading",!1),t.dispatch("productLoading",""),t.dispatch("getCarts")}))},deleteOrder:function(t,e){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("vietnaminsidersaigon","/cart/").concat(e);t.dispatch("updateLoading",!0),r.a.delete(a).then((function(){t.dispatch("updateLoading",!1),t.dispatch("getCarts")}))}},mutations:{LOADING:function(t,e){t.isLoading=e},PRODUCTS:function(t,e){t.products=e},CARTS:function(t,e){t.carts=e.sort((function(t,e){return t.qty-e.qty}))},PRODUCTLOADING:function(t,e){t.productLoading=e},CATEGORIES:function(t){var e=new Set;t.products.forEach((function(t){e.add(t.category)})),t.categories=Array.from(e)},CARTSTOTAL:function(t,e){t.cartTotal=e.reduce((function(t,e){return t+e.total}),0)}}});n["default"].use(w.a),n["default"].use(T.a),n["default"].use(c["a"]),n["default"].use(C.a,{name:"custom",lodash:_.a}),T.a.init(),Object.keys(g).forEach((function(t){Object(v["d"])(t,g[t])})),Object(v["c"])({classes:{valid:"is-valid",invalid:"is-invalid"}}),n["default"].use(o.a,r.a),n["default"].use(l.a),n["default"].component("Loading",b.a),n["default"].component("ValidationProvider",v["b"]),n["default"].component("ValidationObserver",v["a"]),d["a"].use([f["a"],p["a"],h["a"]]),n["default"].config.productionTip=!1,new n["default"]({router:lt,store:ft,render:function(t){return t(B)}}).$mount("#app"),lt.beforeEach((function(t,e,a){t.meta.requiresAuth?Object(dt["b"])().then((function(t){t.data.success?a():a({path:"/login"})})):a()}))},"5c0b":function(t,e,a){"use strict";a("9c0c")},"9c0c":function(t,e,a){},d0ff:function(t,e,a){"use strict";a("4407")},d376:function(t,e,a){},d722:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return o}));a("99af");var n=a("bc3a"),c=a.n(n),s=c.a.create({baseURL:"".concat("https://vue-course-api.hexschool.io")}),r=function(t){return s.post("/admin/signin",t)},i=function(){return s.post("/logout")},o=function(){return s.post("/api/user/check")}},e8a6:function(t,e,a){"use strict";a("d376")}});
//# sourceMappingURL=app.a110cd76.js.map